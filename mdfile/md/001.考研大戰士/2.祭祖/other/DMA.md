---
title: DMA
tags: [os]

---

# DMA

- **直接記憶體存取 ( Direct Memory Access / DMA )**
    
    對於少量的資料來說，Interrupt 很有用，但如果是大量的資料移動 ( EX：NVS I/O )，一直要 CPU 親自處理，負擔就很重
    
    DMA 可以解決這個問題，資料在移動過程不需要觸發 Interrupt，也不需要經過 CPU，而是由 **DMA controller** 將整個資料區段從 locol buffer 直接傳給記憶體，每一個區段 Interrupt 一次就好
    
    這樣的好處就是，CPU 可以去完成其他程序，不會一直被中斷，並且提高資料傳輸速度
- 也負責 device & other
- **Direct Memory Access (直接記憶體存取)**：在電腦架構中，DMA 是一種技術，允許硬體設備直接存取系統記憶體，而不需要經過中央處理器 (CPU)。這樣可以提高資料傳輸速度，尤其是在處理大量資料時，如硬碟、網卡等設備的讀寫操作。

# to [[12.OS]]

![[Pasted image 20241011104222.png]]
- **Why（為什麼）？**    
    - 磁碟控制器的本地緩衝區通常很小，僅僅是作為臨時儲存資料的地方，無法長時間保存大量資料。因此，資料需要儘快從控制器的緩衝區移動到主記憶體，這樣才能繼續處理更多的 I/O 請求並釋放緩衝區。
    - 移動到記憶體後，作業系統或應用程式(CPU)才能夠存取這些資料進行進一步處理。
    - 磁碟的存取速度較慢，主記憶體的速度相對較快，將資料移到記憶體可以提高系統效能和處理速度。
- **How（怎麼做）？**
    - 一種常見的方式是使用 **DMA（Direct Memory Access, 直接記憶體存取）**。DMA 可以讓磁碟控制器自動將資料從其本地緩衝區搬移到主記憶體中，而不需要 CPU 的直接介入。這樣可以減少 CPU 的負擔，並加快資料傳輸速度。
    - 另一種方式是由 CPU 控制(**Program i/o**)，透過 I/O 中斷通知 CPU，然後由 CPU 將資料從磁碟控制器的緩衝區讀取到主記憶體中。

![[Pasted image 20241011115700.png]]

![[Pasted image 20241011115923.png]]
![[Pasted image 20241012233332.png]]

