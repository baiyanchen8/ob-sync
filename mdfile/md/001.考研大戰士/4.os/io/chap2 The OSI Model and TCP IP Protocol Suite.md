# Protocol layers
## Protocols
- A protocol is needed when two entities(å¯¦é«”) need to commu.

## 1 layer commu v.s. 3 layer commu
![[Pasted image 20250527103156.png]]
![[Pasted image 20250527103146.png]]

# The OSI model
OSI æ¨¡å‹ï¼ˆ**Open Systems Interconnection Modelï¼Œé–‹æ”¾å¼ç³»çµ±äº’é€£æ¨¡å‹**ï¼‰æ˜¯ç”± ISOï¼ˆåœ‹éš›æ¨™æº–åŒ–çµ„ç¹”ï¼‰åˆ¶å®šçš„ä¸€å€‹ç¶²è·¯é€šè¨Šæ¶æ§‹ï¼Œç›®çš„æ˜¯è®“ä¸åŒç³»çµ±æˆ–è¨­å‚™ä¹‹é–“èƒ½å¤ é€éçµ±ä¸€çš„æ¨™æº–é€²è¡Œè³‡æ–™å‚³è¼¸èˆ‡æºé€šã€‚é€™å€‹æ¨¡å‹ç¸½å…±æœ‰ **7 å±¤**ï¼Œæ¯ä¸€å±¤éƒ½è² è²¬ä¸åŒçš„åŠŸèƒ½ï¼Œå¾æ‡‰ç”¨ç¨‹å¼åˆ°å¯¦é«”åª’ä»‹ï¼Œå±¤å±¤éäº¤è³‡æ–™ã€‚

![[Pasted image 20250527103227.png]]

---
- Single machine
	- Each layer calls upon the services of the layer just below it
	- æ¯ä¸€å±¤åªæœªä¸Šä¸€å±¤æä¾›æœå‹™ï¼Œä¸¦äº«ç”¨ä¸‹ä¸€å±¤çš„æœå‹™
- Between machines
	- Layer x on one machine communicates with layer x on another machine
	- This communication is governed by protocols

| å±¤ç´š  | åç¨±ï¼ˆè‹±æ–‡ï¼‰             | åŠŸèƒ½ç°¡ä»‹ï¼ˆå°ç£èªªæ³•ï¼‰                                                                                                             |
| --- | ------------------ | ---------------------------------------------------------------------------------------------------------------------- |
| 7   | Application Layer  | æ‡‰ç”¨å±¤ï¼Œåƒæ˜¯ç¶²é ç€è¦½å™¨ã€emailã€FTP é€™é¡æ‡‰ç”¨                                                                                             |
| 6   | Presentation Layer | è¡¨ç¤ºå±¤ï¼Œè² è²¬è³‡æ–™æ ¼å¼è½‰æ›ï¼ˆä¾‹å¦‚ç·¨ç¢¼ã€è§£ç¢¼ã€åŠ å¯†ã€è§£å¯†ï¼‰                                                                                            |
| 5   | Session Layer      | å·¥ä½œéšæ®µå±¤ï¼Œå»ºç«‹ã€ç®¡ç†èˆ‡çµæŸé€šè¨Šæœƒè©±                                                                                                     |
| 4   | Transport Layer    | å‚³è¼¸å±¤ï¼Œåƒ TCPã€UDPï¼Œä¿è­‰è³‡æ–™å®Œæ•´æ€§èˆ‡é †åº                                                                                               |
| 3   | Network Layer      | ç¶²è·¯å±¤ï¼Œè² è²¬ IP å®šä½èˆ‡è·¯ç”±é¸æ“‡ï¼ˆåƒ IP ä½å€ã€Routerï¼‰                                                                                      |
| 2   | Data Link Layer    | è³‡æ–™é€£çµå±¤ï¼Œè™•ç† MAC ä½å€ã€éŒ¯èª¤æª¢æ¸¬<br>**Trailerï¼ˆå¾Œé¢ï¼‰**ï¼šæœ€å¸¸è¦‹çš„å°±æ˜¯ **FCSï¼ˆFrame Check Sequenceï¼‰**ï¼Œç”¨ä¾†æª¢æŸ¥å‚³è¼¸éç¨‹ä¸­æœ‰æ²’æœ‰è³‡æ–™æ¯€æã€‚<br>é€šå¸¸åœ¨ç¬¬äºŒå±¤åŠ å…¥ **Trailer** |
| 1   | Physical Layer     | å¯¦é«”å±¤ï¼Œç¶²è·¯ç·šã€é›»å£“è¨Šè™Ÿã€ç„¡ç·šé›»æ³¢ç­‰ç‰©ç†å‚³è¼¸æ–¹å¼                                                                                               |

## Physical layer
![[Pasted image 20250527144015.png]]

| åŠŸèƒ½é …ç›®                    | ä¸­æ–‡è§£é‡‹             | èˆ‰ä¾‹èªªæ˜                                |
| ----------------------- | ---------------- | ----------------------------------- |
| Representation of bits  | ä½å…ƒè½‰è¨Šè™Ÿçš„æ–¹å¼ï¼ˆç·¨ç¢¼æ–¹å¼ï¼‰   | é›»å£“é«˜ä½ã€å…‰å¼·å¼±ã€ç›¸ä½è®ŠåŒ–ç­‰                      |
| Data rate               | æ¯ç§’å‚³è¼¸ä½å…ƒçš„æ•¸é‡ï¼ˆé€Ÿåº¦ï¼‰    | 100 Mbps ç¶²è·¯                         |
| Synchronization of bits | é€æ”¶ç«¯è³‡æ–™å°é½Šçš„æ–¹å¼ï¼ˆåŒæ­¥æ©Ÿåˆ¶ï¼‰ | Manchester Encodingã€start/stop bits |
### ç‰©ç†å±¤çš„æºé€šæ¨¡å¼ #Duplex

| æ¨¡å¼          | ä¸­æ–‡åç¨±  | è³‡æ–™å‚³è¼¸æ–¹å¼     | å¸¸è¦‹ç¯„ä¾‹       |     |
| ----------- | ----- | ---------- | ---------- | --- |
| Simplex     | å–®å·¥æ¨¡å¼  | å–®å‘å‚³è¼¸       | é›»è¦–å»£æ’­ã€æ»‘é¼ è¼¸å…¥  |     |
| Half-Duplex | åŠé›™å·¥æ¨¡å¼ | é›™å‘ä½†ä¸€æ¬¡åªèƒ½ä¸€é‚Šå‚³ | å°è¬›æ©Ÿã€è€å¼ç¶²è·¯è¨­å‚™ |     |
| Full-Duplex | å…¨é›™å·¥æ¨¡å¼ | é›™å‘ä¸”å¯åŒæ™‚å‚³è¼¸   | æ‰‹æ©Ÿã€ç¾ä»£ä¹™å¤ªç¶²è·¯  |     |

>[!Question]
>![[Pasted image 20250527145514.png]]
>Ans: The physical layer is responsible for sending/receiving individual bits.

### Data Link Layer
> [!Question] æˆ‘å€‘æƒ³å°‡è³‡æ–™å¾file serveé€åˆ°user station, åœ¨physical layerçš„åŸºç¤ä¸Š, æˆ‘å€‘éœ€è¦å¦å¤–æä¾›ä»€éº¼æœå‹™å‘¢?
>The data link layer is responsible for sending/receiving frames from one node to another node in the same network.
>è³‡æ–™éˆçµå±¤è² è²¬åœ¨åŒä¸€ç¶²è·¯å…§å¾ä¸€å€‹ç¯€é»å‚³é€/æ¥æ”¶è¨Šæ¡†åˆ°å¦ä¸€å€‹ç¯€é»ã€‚

| åŠŸèƒ½åç¨±                | ä¸­æ–‡è§£é‡‹            | è£œå……èªªæ˜               |
| ------------------- | --------------- | ------------------ |
| Physical Addressing | å¯¦é«”ä½å€ï¼ˆMAC ä½å€ï¼‰    | å€åŸŸç¶²è·¯å…§ç”¨ä¾†è¾¨è­˜è£ç½®        |
| Access Control      | æ§åˆ¶èª°å¯ä»¥å‚³è³‡æ–™        | é é˜²ç¢°æ’ã€æŒæ§åª’ä»‹          |
| Framing             | æŠŠè³‡æ–™æ‰“åŒ…æˆä¸€å€‹å€‹ Frame | å«æ¨™é ­èˆ‡å°¾ç«¯             |
| Error Control       | æª¢æŸ¥è³‡æ–™æœ‰ç„¡æå£èˆ‡é‡å‚³æ©Ÿåˆ¶   | é€šå¸¸ç”¨ CRC èˆ‡ ACK/NACK |
## Network Layer

$\Huge{\textcolor{red}{å¯¦ç¾è·¨ç¶²è·¯çš„å°åŒ…å‚³é€/æ¥æ”¶}}$
>[!question] Question: æ¬²å¯¦ç¾è·¨ç¶²è·¯çš„å°åŒ…å‚³éèˆ‡æ¥æ”¶éœ€è¦è§£æ±ºä»€éº¼å•é¡Œ?

| å•é¡Œé¡å‹     | èªªæ˜                 |
| -------- | ------------------ |
| å°è£æ ¼å¼ä¸åŒ   | ä¸åŒç¶²è·¯çš„ frame çµæ§‹ç„¡æ³•é€šç”¨ |
| å”å®šä¸ä¸€è‡´    | ä¾‹å¦‚ IPv4 èˆ‡ IPv6 è¦äº’é€š |
| IP ä½å€ä¸é€£é€š | è¦é€éè·¯ç”±æ‰¾è·¯å¾‘ã€æˆ–åš NAT    |
| å‚³è¼¸é€Ÿç‡ä¸ä¸€   | å°åŒ…å¯èƒ½éœ€æš«å­˜ã€åˆ†æ®µ         |
| MTU é™åˆ¶ä¸åŒ | å°åŒ…å¯èƒ½éœ€è¢«åˆ†æ®µé‡çµ„         |
| å¤šç¶²è·¯è½‰é€éœ€æ±‚  | è¦æœ‰è·¯ç”±è¡¨èˆ‡è·¯ç”±å™¨å”åŠ©        |
### ğŸ§  çµè«–ï¼š

> æ¬²å¯¦ç¾è·¨ç¶²è·¯çš„è³‡æ–™å‚³è¼¸ï¼Œå¿…é ˆä»°è³´ã€Œ**ç¶²è·¯å±¤ï¼ˆå¦‚ IP å”å®šï¼‰**ã€ä¾†æä¾›çµ±ä¸€æ ¼å¼ã€å°‹æ‰¾è·¯å¾‘ï¼Œ  
> ä¸¦é€éã€Œ**é–˜é“å™¨ï¼ˆgatewayï¼‰**ã€ä¾†è½‰æ›ä¸åŒç¶²è·¯ä¹‹é–“çš„å°åŒ…æ ¼å¼èˆ‡å”å®šï¼Œæ‰èƒ½è®“è³‡æ–™é †åˆ©é€é”ä¸åŒç¶²æ®µä¸­çš„è¨­å‚™ã€‚

### â“**ç‚ºä»€éº¼éœ€è¦ Logical Addressingï¼Ÿ**

---

### âœ… 1. **Physical Addressing æ˜¯ã€Œå€åŸŸæ€§ã€çš„ä½å€ç³»çµ±**

- å¯¦é«”ä½å€ï¼ˆåƒ MAC addressï¼‰åªåœ¨ã€Œ**åŒä¸€å€‹ç¶²è·¯ï¼ˆLANï¼‰**ã€è£¡æœ‰æ•ˆ
    
- ä¾‹å¦‚å…©å°é›»è…¦é€£åœ¨åŒä¸€å€‹ switchï¼Œå®ƒå€‘é  MAC ä½å€å°±å¯ä»¥äº’ç›¸é€šè¨Š
    
- ä½†åªè¦å°åŒ…è¦è·¨åˆ°åˆ¥çš„ç¶²è·¯ï¼ˆä¾‹å¦‚è·¨ routerï¼‰ï¼Œ**MAC ä½å€å°±ä¸é©ç”¨**
    

---

### âœ… 2. **è·¨ç¶²è·¯å‚³è¼¸éœ€è¦ã€Œé‚è¼¯ä½å€ã€**

- ä¸€æ—¦å°åŒ…è¦é›¢é–‹åŸæœ¬çš„ç¶²æ®µï¼ˆä¾‹å¦‚è¦å¾ 192.168.x.x å‚³åˆ° 140.112.x.xï¼‰ï¼Œå°±ä¸èƒ½å†é  MAC äº†
    
- æ‰€ä»¥æˆ‘å€‘éœ€è¦ä¸€å€‹ã€Œ**å…¨çƒå”¯ä¸€ã€æœ‰éšå±¤çµæ§‹çš„ä½å€**ã€ä¾†è¾¨è­˜ä¸»æ©Ÿåœ¨å“ªè£¡  
    â¡ï¸ é€™å°±æ˜¯ **IP ä½å€ï¼ˆLogical Addressingï¼‰**
    

---

### ğŸ§  ç¸½çµä¸€ä¸‹ï¼š

| ä½å€é¡å‹   | ä½œç”¨ç¯„åœ      | æ˜¯å¦èƒ½è·¨ç¶²è·¯ | ç¯„ä¾‹                             |
| ------ | --------- | ------ | ------------------------------ |
| MAC ä½å€ | å€åŸŸç¶²è·¯ï¼ˆLANï¼‰ | âŒ ä¸èƒ½   | `00:1A:2B:3C:4D:5E`            |
| IP ä½å€  | å…¨çƒç¶²éš›ç¶²è·¯    | âœ… å¯ä»¥   | `192.168.1.1`ã€`140.112.123.45` |

---

### â“**ç‚ºä»€éº¼éœ€è¦ Routingï¼ˆè·¯ç”±ï¼‰ï¼Ÿ**

---

### âœ… åŸå› ï¼š**IP å°åŒ…åªçŸ¥é“ç›®çš„åœ° IPï¼Œä½†ä¸çŸ¥é“æ€éº¼èµ°éå»**

- æƒ³åƒä½ æœ‰ä¸€å°ä¿¡è¦å¯„åˆ°ã€Œå°åŒ—å¸‚ä¸­æ­£å€å¿ å­è¥¿è·¯ä¸€æ®µ 100 è™Ÿã€  
    â¡ï¸ ä½ çŸ¥é“åœ°å€ï¼Œä½†ä½ ä¸çŸ¥é“å“ªæ¢è·¯ã€å“ªå€‹éƒµå±€è² è²¬å¹«ä½ é€åˆ°é‚£è£¡
- ç¶²è·¯ä¸–ç•Œä¹Ÿæ˜¯ä¸€æ¨£ï¼Œ**è·¯ç”±å™¨ï¼ˆRouterï¼‰å°±åƒéƒµå±€ä¸€æ¨£**
    - æ ¹æ“šã€Œç›®çš„ IPã€ä¾†åˆ¤æ–·ä¸‹ä¸€è·³ï¼ˆnext hopï¼‰     
    - å†ä¸€æ­¥æ­¥å¹«ä½ æŠŠå°åŒ…è½‰é€å‡ºå»

### Node-to-Node (Hop-to-Hop) Delivery v.s. Host-to-Host Delivery

| æ¯”è¼ƒé …ç›® | Node-to-Node Delivery | Host-to-Host Delivery |
| ---- | --------------------- | --------------------- |
| å‚³éå±¤ç´š | è³‡æ–™é€£çµå±¤ï¼ˆLayer 2ï¼‰        | ç¶²è·¯å±¤ï¼ˆLayer 3ï¼‰          |
| å‚³éå°è±¡ | ç›¸é„°ç¯€é»ï¼ˆä¸‹ä¸€è·³ï¼‰             | èµ·é»ä¸»æ©Ÿ â†’ çµ‚é»ä¸»æ©Ÿ           |
| ä½å€é¡å‹ | MAC ä½å€ï¼ˆå¯¦é«”ï¼‰            | IP ä½å€ï¼ˆé‚è¼¯ï¼‰             |
| å‚³éç¯„åœ | åŒä¸€ç¶²è·¯å…§                 | è·¨å¤šå€‹ç¶²è·¯                 |
| é‡é»ç”¨é€” | é»å°é»å‚³é€                 | æºåˆ°ç›®çš„åœ°è³‡æ–™é€é”             |
| ç¯„ä¾‹   | é›»è…¦ â†” è·¯ç”±å™¨              | å®¶è£¡é›»è…¦ â†” Google Server  |
## Transport layer
reliable process-to-process message **delivery**
âœ… è² è²¬ **Process-to-Processï¼ˆç¨‹å¼å°ç¨‹å¼ï¼‰ä¹‹é–“çš„å®Œæ•´è³‡æ–™å‚³é**  
âœ… ä¸åªæ˜¯æŠŠå°åŒ…é€åˆ°ç›®çš„åœ°ä¸»æ©Ÿï¼Œè€Œæ˜¯é€åˆ°ä¸»æ©Ÿä¸Šã€Œæ­£ç¢ºçš„æ‡‰ç”¨ç¨‹å¼ï¼ˆä¾‹å¦‚ï¼šç€è¦½å™¨ã€éƒµä»¶ä¼ºæœå™¨ï¼‰ã€

|æ§åˆ¶åŠŸèƒ½|èªªæ˜|è§£æ±ºå•é¡Œ|
|---|---|---|
|Error Control|ç¢ºä¿è³‡æ–™æ­£ç¢ºé€é”ï¼Œå¯é‡å‚³éŒ¯èª¤è³‡æ–™|éŒ¯èª¤/éºå¤±å°åŒ…|
|Flow Control|æ§åˆ¶å‚³é€é€Ÿç‡ï¼Œé¿å…æ¥æ”¶ç«¯çˆ†æ‰|æ¥æ”¶ç«¯è¶…è¼‰|
|Congestion Control|æ ¹æ“šç¶²è·¯æƒ…æ³èª¿æ•´é€Ÿåº¦ï¼Œé˜²æ­¢æ•´é«”å£…å¡|ç¶²è·¯æ“æ“ ã€æ‰åŒ…|
# TCP /IP protocol suite

1. TCP/IP å”å®šå¥—ä»¶æ˜¯åœ¨ OSI æ¨¡å‹ä¹‹å‰å°±å·²ç¶“é–‹ç™¼å‡ºä¾†ã€‚
2. æœ€åˆçš„ TCP/IP å”å®šæ˜¯å»ºç«‹åœ¨ç¡¬é«”ä¹‹ä¸Šçš„å››å±¤è»Ÿé«”çµæ§‹ã€‚
3. ç¾åœ¨æˆ‘å€‘é€šå¸¸æŠŠ TCP/IP çœ‹ä½œæ˜¯äº”å±¤æ¨¡å‹ï¼š**å¯¦é«”å±¤ã€è³‡æ–™éˆçµå±¤ã€ç¶²è·¯å±¤ã€å‚³è¼¸å±¤ã€æ‡‰ç”¨å±¤**ã€‚
 ![[Pasted image 20250529050918.png]]

åœ¨ TCP/IP å”å®šæ¶æ§‹è£¡ï¼Œ**æ‡‰ç”¨å±¤ä¸åªç­‰åŒæ–¼ OSI æ¨¡å‹çš„ã€Œæ‡‰ç”¨å±¤ã€è€Œå·²**ï¼Œå®ƒå…¶å¯¦é‚„åŒ…å«äº†ï¼š
1. **æ‡‰ç”¨å±¤ï¼ˆApplication Layerï¼‰**
2. **è¡¨ç¤ºå±¤ï¼ˆPresentation Layerï¼‰**
3. **æœƒè­°å±¤ï¼ˆSession Layerï¼‰**
ä¹Ÿå°±æ˜¯èªªï¼ŒTCP/IP çš„ã€Œæ‡‰ç”¨å±¤ã€æ˜¯ä¸€å€‹**æ•´åˆäº† OSI æ¨¡å‹æœ€ä¸Šé¢ä¸‰å±¤åŠŸèƒ½çš„é›†åˆ**ï¼ŒåŒ…æ‹¬è³‡æ–™æ ¼å¼çš„è½‰æ›ï¼ˆåƒæ˜¯ç·¨ç¢¼/è§£ç¢¼ï¼‰ã€è³‡æ–™åŠ å¯†/è§£å¯†ã€å»ºç«‹èˆ‡ç®¡ç†æ‡‰ç”¨ç«¯çš„æºé€šéšæ®µç­‰ã€‚

**å®šç¾©ï¼šLinkï¼ˆé€£çµï¼‰**  
åœ¨ç¶²è·¯ä¸­ï¼Œã€Œé€£çµã€æ˜¯æŒ‡é€£æ¥å…©å€‹æˆ–å¤šå€‹è£ç½®ï¼Œä½¿å®ƒå€‘èƒ½å¤ å½¼æ­¤é€šè¨Šçš„**å¯¦é«”æˆ–é‚è¼¯åª’ä»‹**ã€‚
ä¸€å€‹ã€Œé€£çµã€å¯ä»¥æ˜¯ï¼š
- **å€åŸŸç¶²è·¯ï¼ˆLANï¼ŒLocal Area Networkï¼‰**ï¼šä¾‹å¦‚è¾¦å…¬å®¤ã€å­¸æ ¡å…§éƒ¨çš„ç¶²è·¯
- **å»£åŸŸç¶²è·¯ï¼ˆWANï¼ŒWide Area Networkï¼‰**ï¼šä¾‹å¦‚è·¨åŸå¸‚æˆ–è·¨åœ‹çš„ç¶²è·¯ï¼ˆåƒæ˜¯é›»ä¿¡å…¬å¸æä¾›çš„éª¨å¹¹ç¶²ï¼‰
é€™äº›ä¸åŒçš„é€£çµä¹‹é–“ï¼Œæœƒé€éç¨±ç‚º **è·¯ç”±å™¨ï¼ˆrouterï¼‰** æˆ– **äº¤æ›å™¨ï¼ˆswitchï¼‰** çš„è¨­å‚™ä¾†äº’ç›¸é€£æ¥ã€‚

## Physical Layer
**TCP/IP ä¸¦æ²’æœ‰å®šç¾©ä»»ä½•ç‰¹å®šçš„å¯¦é«”å±¤å”å®š**ï¼ˆåƒè¦‹ä¸‹ä¸€å¼µæŠ•å½±ç‰‡ï¼‰  
åœ¨é€™å€‹å±¤ç´šä¸­ï¼Œ**é€šè¨Šçš„åŸºæœ¬å–®ä½æ˜¯ä¸€å€‹ bitï¼ˆä½å…ƒï¼‰**ã€‚
![[Pasted image 20250529162433.png]]
## Data Link Layers
- TCP/IP does not define any specific protocol
- The unit of communication is a packet called a frame
## Network Layer
1. æ‡‰ç”¨å±¤ï¼ˆApplication Layerï¼‰
2. è¡¨ç¤ºå±¤ï¼ˆPresentation Layerï¼‰
3. æœƒè­°å±¤ï¼ˆSession Layerï¼‰
### ğŸ“š ç¶²è·¯å±¤ï¼ˆNetwork Layerï¼‰ä»‹ç´¹ - TCP/IP æ¶æ§‹ä¸­çš„ç¬¬ä¸‰å±¤

#### âœ… ä¸»è¦åŠŸèƒ½ï¼š
ç¶²è·¯å±¤çš„ä¸»è¦ä»»å‹™æ˜¯**å¯¦ç¾è³‡æ–™å°åŒ…åœ¨ä¸åŒç¶²è·¯ä¹‹é–“çš„å‚³é€èˆ‡è·¯ç”±é¸æ“‡**ï¼Œå®ƒè² è²¬å¾ä¾†æºä¸»æ©Ÿå°‡å°åŒ…è½‰é€åˆ°ç›®çš„ä¸»æ©Ÿï¼Œ**å³ä½¿é€™å…©å°ä¸»æ©Ÿä¸åœ¨åŒä¸€å€‹å€åŸŸç¶²è·¯ä¸Š**ä¹Ÿæ²’å•é¡Œã€‚
#### ğŸ“¦ è³‡æ–™å–®ä½ï¼š
- ç¶²è·¯å±¤è™•ç†çš„è³‡æ–™å–®ä½ç¨±ç‚º **ã€Œå°åŒ…ï¼ˆPacketï¼‰ã€**
#### ğŸŒ é—œéµä»»å‹™ï¼š
1. **é‚è¼¯ä½å€æŒ‡æ´¾èˆ‡è™•ç†**
    - ä½¿ç”¨ **IP ä½å€ï¼ˆInternet Protocol Addressï¼‰** ä½œç‚ºè£ç½®åœ¨ç¶²è·¯ä¸­çš„é‚è¼¯è­˜åˆ¥
2. **è·¯ç”±é¸æ“‡ï¼ˆRoutingï¼‰**
    - æ ¹æ“šç›®çš„åœ° IP ä½å€ï¼Œé¸æ“‡åˆé©çš„è·¯å¾‘å°‡å°åŒ…å¾ä¾†æºé€å¾€ç›®çš„åœ°
3. **åˆ†å‰²èˆ‡é‡çµ„ï¼ˆFragmentation/Reassemblyï¼‰**
    - è‹¥å°åŒ…å¤ªå¤§è¶…éåº•å±¤ç¶²è·¯çš„å‚³è¼¸é™åˆ¶ï¼ˆMTUï¼‰ï¼Œæœƒé€²è¡Œåˆ‡å‰²èˆ‡é‡çµ„
#### ğŸ”§ ä»£è¡¨æ€§å”å®šï¼š
- **IPv4 / IPv6**ï¼šè² è²¬ IP ä½å€ç·¨å€èˆ‡å°åŒ…è½‰é€
- **ICMPï¼ˆInternet Control Message Protocolï¼‰**ï¼šæä¾›éŒ¯èª¤å›å ±èˆ‡è¨ºæ–·ï¼ˆä¾‹å¦‚ pingï¼‰
- **IGMPï¼ˆInternet Group Management Protocolï¼‰**ï¼šç®¡ç†å¤šæ’­ç¾¤çµ„
#### ğŸ“ æ³¨æ„äº‹é …ï¼š
- ç¶²è·¯å±¤ä¸ä¿è­‰å°åŒ…çš„å¯é å‚³é€ï¼ˆä¾‹å¦‚ï¼šå°åŒ…å¯èƒ½æœƒéºå¤±ã€å»¶é²æˆ–é †åºéŒ¯äº‚ï¼‰
- å°åŒ…å‚³é€çš„å¯é æ€§ç”±ä¸Šå±¤çš„ã€Œ**å‚³è¼¸å±¤ï¼ˆTransport Layerï¼‰**ã€ä¾†è™•ç†ï¼ˆåƒæ˜¯ TCPï¼‰
- datagram 
	- æŒ‡çš„æ˜¯ packet header ä¸­çš„åŒ…å« Source IP ã€Target IP ã€TTL(Time to live)ç­‰è³‡è¨Šçš„éƒ¨ä»½ç¨±ç‚º Datagram
![[Pasted image 20250530000421.png]]

> [!question] Why intermediate nodes need Layers 1, 2 and 3?
---
> [!answer] Layer 1 &2 : è² è²¬å‚³è¼¸ ï¼ˆNode-to-nodeï¼‰; Layer 3 : Routingï¼ˆWhere A to Bï¼‰


## Transport Layer
- difference between Network & transport 
	- åªæœ‰æœ€å‰ï¼†æœ€å¾Œå…©å€‹ç¯€é»éœ€è¦ Tramsport layer,è€Œ Network å…¨éƒ½éœ€è¦ã€‚
- Deliver the whole message, which is called a segment, a user datagram, or a packet, from A to B
- a segment may slice into rens of IP datagrams
![[Pasted image 20250530003235.png]]
- Three transport layer protocols
	- UDP (User Datagram Protocol)
	- TCP (Transmission Control Protocol)
	- SCTP (Stream Control Transmission Protocol)
- Many protocols are defined in this layer
	- DHCP,DNS, TELNET, SSH, FTP, TFTP, HTTP, SMTP, POP, IMAP, MIME, SNMP

| å±¤ç´šï¼ˆLayerï¼‰                  | å°åŒ…åç¨±ï¼ˆPacket Nameï¼‰                              | èªªæ˜                                                   |
| -------------------------- | ---------------------------------------------- | ---------------------------------------------------- |
| **è³‡æ–™éˆçµå±¤ï¼ˆData Link Layerï¼‰** | ğŸ”¹ **Frameï¼ˆå¹€ï¼‰**                                | å°åŒ…åœ¨å¯¦é«”ç¶²è·¯ä¸­å‚³é€çš„å–®ä½ï¼ŒåŒ…å« MAC ä½å€èˆ‡éŒ¯èª¤æª¢æŸ¥è³‡è¨Šï¼ˆå¦‚ FCSï¼‰ã€‚ä¾‹å¦‚ä»¥å¤ªç¶²è·¯çš„ frameã€‚ |
| **ç¶²è·¯å±¤ï¼ˆNetwork Layerï¼‰**     | ğŸ”¹ **Datagramï¼ˆè³‡æ–™å ±ï¼‰**                           | IP å°åŒ…ã€‚åŒ…å«ä¾†æºèˆ‡ç›®çš„åœ°çš„ IP ä½å€ï¼Œç”¨ä¾†å¯¦ç¾ä¸åŒç¶²è·¯é–“çš„è·¯ç”±èˆ‡å‚³éã€‚               |
| **å‚³è¼¸å±¤ï¼ˆTransport Layerï¼‰**   | **User datagram ** **segment**  <br>**packet** | ç”¨ä¾†å¯¦ç¾ä¸»æ©Ÿä¹‹é–“çš„å¯é æˆ–ä¸å¯é è³‡æ–™å‚³é€ã€‚åŒ…å« portã€åºè™Ÿã€æª¢æŸ¥ç¢¼ç­‰æ§åˆ¶è³‡è¨Šã€‚             |
![[Pasted image 20250530003701.png]]