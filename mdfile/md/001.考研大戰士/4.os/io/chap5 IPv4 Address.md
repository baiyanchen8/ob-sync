# Introduction
- IP address, or Internet Address
	- 32-bit long
	- Uniquely and universally defines an network interface
# Classful addressing
- IP address space is divided into five classes: A, B, C, D, E 
	- Classful Addressing æ˜¯æ—©æœŸ IP ä½å€çš„ç·¨æ’æ–¹å¼ï¼Œ**æ ¹æ“šä½å€çš„é–‹é ­å¹¾å€‹ bit ä¾†åŠƒåˆ†ä¸åŒçš„é¡åˆ¥ï¼ˆClass Aã€Bã€Cã€Dã€Eï¼‰**ï¼Œæ¯ä¸€é¡ä½å€éƒ½æœ‰å›ºå®šçš„ç¶²è·¯ä½å…ƒï¼ˆnetwork bitsï¼‰èˆ‡ä¸»æ©Ÿä½å…ƒï¼ˆhost bitsï¼‰æ¯”ä¾‹ã€‚
![[Pasted image 20250531190851.png]]
- **Class A** çš„ 127.x.x.x ä¿ç•™ä½œç‚º **loopbackï¼ˆç’°è¿´æ¸¬è©¦,localhostï¼‰**ï¼Œä¾‹å¦‚ï¼š127.0.0.1
-   åˆ†è¾¨æ–¹æ³•ä½¿ç”¨é †åºé€£çºŒåˆ¤æ–·   
		![[Pasted image 20250531191038.png]]

## Netid and Hostid
- **Netidï¼ˆç¶²è·¯ä½å…ƒï¼‰**ï¼šç”¨ä¾†è­˜åˆ¥æ˜¯å“ªå€‹ç¶²è·¯ï¼ˆNetworkï¼‰
- **Hostidï¼ˆä¸»æ©Ÿä½å…ƒï¼‰**ï¼šç”¨ä¾†è­˜åˆ¥è©²ç¶²è·¯ä¸­çš„å“ªä¸€å°ä¸»æ©Ÿï¼ˆDeviceï¼‰
![[Pasted image 20250531194758.png]]

![[Pasted image 20250531195447.png]]
![[Pasted image 20250531195642.png]]
![[Pasted image 20250531195647.png]]
![[Pasted image 20250531195654.png]]
![[Pasted image 20250531195700.png]]
![[Pasted image 20250531195506.png]]
![[Pasted image 20250531195521.png]]
## Network mask
> [!question]-  why we care about network addresses?
> å› ç‚º Router è¦æºé€šä¸åŒçš„ Local NET

> [!question]- å¦‚ä¸Šé¡Œ, å¦‚ä½•å¾å°åŒ…çš„destination IP addresså¾—çŸ¥ç›®çš„ç¶²è·¯çš„network address?
> é€é Network mask

# Classless addressing

## Solutions to Address Depletion(æ¸›å°‘)

| è§£æ³•                        | èªªæ˜                                                         | ç‰¹æ€§         | å„ªç¼ºé»ç°¡è¿°                                        |
| ------------------------- | ---------------------------------------------------------- | ---------- | -------------------------------------------- |
| 1ï¸âƒ£ Private Address + NAT | ä½¿ç”¨ç§æœ‰ IP æ­é… NATï¼ˆNetwork Address Translationï¼‰å°‡å…§éƒ¨ IP æ˜ å°„æˆå¤–éƒ¨ IP | çŸ­æœŸè§£æ³•ï¼ˆå¯¦ç”¨ä¸­ï¼‰  | âœ… æ¸›å°‘å…¬æœ‰ IP ä½¿ç”¨é‡â›” æœ‰äº›æ‡‰ç”¨ï¼ˆå¦‚ P2Pã€VoIPï¼‰é›£ä»¥é‹ä½œæˆ–éœ€é¡å¤–é…ç½®    |
| 2ï¸âƒ£ Classless Addressing  | ä½¿ç”¨ CIDR è¡¨ç¤ºæ³•ï¼Œç²¾ç¢ºåˆ†é…å­ç¶²ï¼ˆ/23ã€/26â€¦ï¼‰                               | çŸ­æœŸè§£æ³•ï¼ˆä»åœ¨ä½¿ç”¨ï¼‰ | âœ… æé«˜ä½å€åˆ©ç”¨ç‡<br>â›” ä¸¦æœªå¾æ ¹æœ¬ä¸Šè§£æ±º IPv4 ä½å€ç¸½é‡ä¸è¶³          |
| 3ï¸âƒ£ IPv6                  | ä½¿ç”¨ 128 ä½å…ƒä½å€ç©ºé–“ï¼Œæä¾›å¹¾ä¹ç„¡é™çš„ IP ä½å€                                | é•·æœŸè§£æ³•ï¼ˆæœ€çµ‚ç›®æ¨™ï¼‰ | âœ… è§£æ±ºä½å€è€—ç›¡ã€æ”¯æ´æ›´å¤šè¨­å‚™ã€æ”¯æ´è‡ªå‹•çµ„æ…‹ã€å®‰å…¨æ€§æ›´é«˜<br>â›” éœ€ç¡¬é«”èˆ‡è»Ÿé«”å…¨é¢æ”¯æ´ |
## Classless address æ–¹æ³•

![[Pasted image 20250531211821.png]]
ç°¡å–®è€Œè¨€å°±æ˜¯å°‡åŸæœ¬åªæœ‰A~Eçš„classsful address åˆ†é…æ”¹ç‚º 1bit 1 class

| é …ç›®     | èªªæ˜                                                                              |
| ------ | ------------------------------------------------------------------------------- |
| ğŸŒ å®šç¾©  | ä¸å†ä½¿ç”¨å›ºå®šçš„ Aã€Bã€C é¡åˆ¥ï¼Œè€Œæ˜¯ä»¥ã€Œä½å…ƒæ•¸é‡ã€ä¾†æ±ºå®šç¶²è·¯èˆ‡ä¸»æ©Ÿä½å…ƒï¼ˆprefixï¼‰                                    |
| ğŸ§  ç²¾ç¥  | ç”¨ CIDRï¼ˆClassless Inter-Domain Routingï¼‰è¡¨ç¤ºæ³•ï¼Œä¾‹å¦‚ `192.168.1.0/24`ï¼Œæ–œç·šå¾Œçš„æ•¸å­—è¡¨ç¤ºã€Œç¶²è·¯ä½å…ƒã€æ•¸   |
| ğŸ¯ å„ªé»  | æ›´å½ˆæ€§çš„ IP åˆ†é…ï¼Œå¯ä»¥æ ¹æ“šå¯¦éš›éœ€æ±‚åˆ†é…æ›´å¤§æˆ–æ›´å°çš„ç¶²æ®µï¼ˆæé«˜ä½¿ç”¨ç‡ï¼‰                                            |
| ğŸ” ç¯„ä¾‹  | - `192.168.1.0/25` â†’ å¯ç”¨ 126 å€‹ hostï¼ˆä¸æ˜¯å‚³çµ± C é¡ 254ï¼‰ - `10.0.0.0/8` â†’ å¯ç”¨ 16M å€‹ host |
| âŒ ä¸å†ä¾é  | é¡åˆ¥ (A/B/C/D/E)ï¼Œè€Œæ˜¯é  prefix æ±ºå®šç¶²è·¯éƒ¨åˆ†ï¼ˆå¯åˆ‡ /27ã€/30ã€/13 ç­‰ï¼‰                              |
| â“å•é¡Œ    | å¦‚æœåªçµ¦ address **ç„¡æ³•è¾¨èª**æ˜¯ /n ?                                                     |
# Special Address
|ç‰¹æ®Šä½å€é¡å‹|ç¯„åœï¼ä½å€|ç”¨é€”èªªæ˜|
|---|---|---|
|All-zeros|`0.0.0.0`|å°šæœªæŒ‡å®š IPã€ä»£è¡¨æœ¬æ©Ÿ|
|Limited Broadcast|`255.255.255.255`|å»£æ’­è‡³æœ¬åœ°ç¶²è·¯æ‰€æœ‰è£ç½®|
|Loopback|`127.0.0.0/8`|æ¸¬è©¦æœ¬æ©Ÿç¶²è·¯å †ç–Š|
|Private Address|`10.x.x.x`ã€`172.16~31.x.x`ã€`192.168.x.x`|å±€åŸŸç¶²å…§éƒ¨å°ˆç”¨ï¼Œä¸å¯ç”¨æ–¼å…¬é–‹ç¶²è·¯|
# NAT(Network Address Translation,From private net To Clobal Net)
![[Pasted image 20250601014816.png]]
![[Pasted image 20250601014856.png]]
```mermaid
sequenceDiagram
    participant A as Client A (192.168.1.10:12345)
    participant NAT as NAT Router (Translation Table)
    participant B as Web Server (93.184.216.34:80)

    Note over NAT: å»ºç«‹ NAT Translation Table<br/>192.168.1.10:12345 â†’ 203.0.113.1:50001

    A->>NAT: ç™¼å‡ºå°åŒ… (to 93.184.216.34:80)
    NAT->>B: æ”¹å¯«æˆ 203.0.113.1:50001 ç™¼å‡ºå°åŒ…

    B->>NAT: å›æ‡‰å°åŒ… (to 203.0.113.1:50001)
    NAT->>A: æŸ¥è¡¨è½‰å› 192.168.1.10:12345

```
![[Pasted image 20250601020041.png]]
å°å…§çš„ private address å¯ä»¥æœ‰å¾ˆå¤šå€‹ï¼Œè€Œå°å¤–çš„ global address åªæœ‰ä¸€å€‹ï¼Œ æ‰€ä»¥è¦åŠ å…¥ port number åšè¾¨èªï¼Œ åˆå› ç‚º port number å¯èƒ½ç›¸åŒï¼Œæ‰€ä»¥ åˆè¦åŠ å…¥ translation port ã€‚